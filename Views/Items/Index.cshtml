@using Microsoft.AspNetCore.Identity
<link rel="stylesheet" href="./css/item.css">

@model HomeFinder.ViewModels.ItemListViewModel
@{
    ViewData["Title"] = "Index";
}
@inject SignInManager<ApplicationUser> signInManager
@inject UserManager<ApplicationUser> userManager

@if (User.IsInRole("Broker") || User.IsInRole("Admin") )
{
    <p>
        <a asp-controller="Items" asp-action="AddNewItem">Lägg till ny bostad <i class="fa-solid fa-plus"></i></a>
        @*<a asp-action="Create">Create new <i class="fa-solid fa-plus"></i></a>*@
    </p>
}

<div class="front row">
    <div class="card col-md-5 bg-light m-3 p-2">
        <h3 class="">
            Sök bland fastigheter
        </h3>
        <form asp-controller="Items" asp-action="Index" class="col-md-12">
            <h6 class="mb-0 mt-1">Fastighetstyp</h6>
            <div class="row">
                <select class="m-1 col-sm-10" asp-for="ItemType" asp-items="Model.ItemTypesVM">
                    <option value="">Alla</option>
                </select>
            </div>
            <h6 class="mb-0 mt-1">Stad eller Adress</h6>
            <div class="row">
                <input type="text" name="searchString" placeholder="Sök" class="m-1 col-sm-10" />
            </div>
            <h6 class="mb-0 mt-1">Antal rum</h6>
            <div class="row">
                <select class="m-1 col-4" asp-for="MinNrOfRooms" asp-items="Model.NrOfRoomsVM">
                    <option value="">Min</option>
                </select>&nbsp;&#8212;&nbsp;
                <select class="m-1 col-4" asp-for="MaxNrOfRooms" asp-items="Model.NrOfRoomsVM">
                    <option value="">Max</option>
                </select>
            </div>

            <h6 class="mb-0 mt-1">Boarea m²</h6>
            <div class="row">
                <select class="m-1 col-4" asp-for="MinArea" asp-items="Model.LowerAreaSpan">
                    <option value="">Min</option>
                </select>&nbsp;&#8212;&nbsp;
                <select class="m-1 col-4" asp-for="MaxArea" asp-items="Model.HigherAreaSpan">
                    <option value="">Max</option>
                </select>
            </div>

            <h6 class="mb-0 mt-1">Pris</h6>
            <div class="row">
                <select class="m-1 col-4" asp-for="MinPrice" asp-items="Model.LowerPriceSpan">
                    <option value="">Min</option>
                </select>&nbsp;&#8212;&nbsp;
                <select class="m-1 col-4" asp-for="MaxPrice" asp-items="Model.HigherPriceSpan">
                    <option value="">Max</option>
                </select>
            </div>
            <div class="row">
                <select class="m-1 col-sm-5" asp-for="DisplayOrder">
                    <option value="Pris_Stigande">Pris - stigande</option>
                    <option value="Pris_Fallande">Pris - fallande</option>
                    <option value="Datum_Nyast">Nyast</option>
                    <option value="Datum_Äldst">Äldst</option>
                </select>
                <input type="submit" value="Sök" class="btn btn-primary col-sm-3 m-1" />
                <a asp-action="Index" class="btn btn-secondary col-sm-3 m-1">Rensa</a>
            </div>
        </form>
    </div>
</div>


@*--- Partial view ---*@

<div class="container">
    <div class="row">
        @foreach (var item in Model.Items)
        {
            <partial name="_itemThumbnail" model="@item" />
        }
    </div>
</div>







